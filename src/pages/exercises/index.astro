---
import { getCollection } from 'astro:content';
import BaseHead from '../../components/BaseHead.astro';
import Footer from '../../components/Footer.astro';
import Header from '../../components/Header.astro';
import { SITE_TITLE } from '../../consts';

const exercises = await getCollection('exercises');

const categoryIcons: Record<string, string> = {
	'Strength': 'üí™',
	'Cardio': '‚ù§Ô∏è',
	'Core': 'üéØ',
	'Flexibility': 'üßò',
	'Compound': 'üèãÔ∏è',
};

const difficultyColors: Record<string, string> = {
	'Beginner': 'bg-green-500/20 text-green-300',
	'Intermediate': 'bg-yellow-500/20 text-yellow-300',
	'Advanced': 'bg-red-500/20 text-red-300',
};
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={`Exercises | ${SITE_TITLE}`} description="Browse our collection of exercises with detailed instructions and tips." />
	</head>
	<body class="min-h-screen flex flex-col bg-gradient-to-br from-purple-700 via-pink-600 to-orange-500 dark:from-gray-900 dark:via-purple-900 dark:to-gray-900 transition-colors duration-500">
		<!-- Animated background blobs -->
		<div class="fixed inset-0 overflow-hidden pointer-events-none">
			<div class="absolute -top-40 -left-40 w-80 h-80 bg-purple-400 dark:bg-purple-600 rounded-full mix-blend-multiply dark:mix-blend-soft-light filter blur-3xl opacity-70 animate-blob"></div>
			<div class="absolute top-40 -right-40 w-80 h-80 bg-yellow-300 dark:bg-pink-600 rounded-full mix-blend-multiply dark:mix-blend-soft-light filter blur-3xl opacity-70 animate-blob animation-delay-2000"></div>
			<div class="absolute -bottom-40 left-1/2 w-80 h-80 bg-pink-400 dark:bg-blue-600 rounded-full mix-blend-multiply dark:mix-blend-soft-light filter blur-3xl opacity-70 animate-blob animation-delay-4000"></div>
		</div>

		<Header />

		<div class="relative z-10 max-w-6xl mx-auto px-4 pt-24 pb-12 flex-1">
			<div class="text-center mb-12">
				<h1 class="text-4xl md:text-5xl font-bold text-white mb-4 drop-shadow-lg">Exercises</h1>
				<p class="text-lg text-white/80">Master proper form with our detailed exercise guides</p>
			</div>

			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
				{exercises.map((exercise) => (
					<a href={`${import.meta.env.BASE_URL}/exercises/${exercise.id}/`} class="group">
						<article class="glass-card rounded-3xl p-6 h-full hover:scale-[1.02] hover:bg-white/30 dark:hover:bg-white/15 transition-all duration-300">
							<div class="flex items-start justify-between mb-4">
								<span class="text-3xl">{categoryIcons[exercise.data.category]}</span>
								<span class={`px-3 py-1 rounded-full text-xs font-medium ${difficultyColors[exercise.data.difficulty]}`}>
									{exercise.data.difficulty}
								</span>
							</div>

							<h2 class="text-xl font-bold text-white mb-2 group-hover:text-white transition-colors">
								{exercise.data.name}
							</h2>

							<p class="text-white/60 text-sm mb-4 line-clamp-2">
								{exercise.data.description}
							</p>

							<div class="flex flex-wrap gap-2 mb-4">
								{exercise.data.muscleGroups.slice(0, 3).map((muscle) => (
									<span class="glass px-2 py-1 rounded-lg text-xs text-white/70">
										{muscle}
									</span>
								))}
								{exercise.data.muscleGroups.length > 3 && (
									<span class="glass px-2 py-1 rounded-lg text-xs text-white/70">
										+{exercise.data.muscleGroups.length - 3}
									</span>
								)}
							</div>

							<div class="flex items-center gap-2 text-white font-medium group-hover:gap-3 transition-all">
								View details
								<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
								</svg>
							</div>
						</article>
					</a>
				))}
			</div>
		</div>

		<Footer />

		<style>
			@keyframes blob {
				0% { transform: translate(0px, 0px) scale(1); }
				33% { transform: translate(30px, -50px) scale(1.1); }
				66% { transform: translate(-20px, 20px) scale(0.9); }
				100% { transform: translate(0px, 0px) scale(1); }
			}
			.animate-blob {
				animation: blob 7s infinite;
			}
			.animation-delay-2000 {
				animation-delay: 2s;
			}
			.animation-delay-4000 {
				animation-delay: 4s;
			}
		</style>
	</body>
</html>
