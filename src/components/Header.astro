---
import { SITE_TITLE } from '../consts';
---

<header class="fixed top-0 left-0 right-0 z-50 px-4 py-3">
	<nav class="glass max-w-6xl mx-auto rounded-2xl px-6 py-3 flex items-center justify-between">
		<a href={`${import.meta.env.BASE_URL}/`} class="text-xl font-bold text-white hover:text-white/80 transition-colors">
			{SITE_TITLE}
		</a>

		<div class="flex items-center gap-4">
			<a href={`${import.meta.env.BASE_URL}/exercises`} class="text-white/80 hover:text-white transition-colors text-sm font-medium">
				Exercises
			</a>
			<a href={`${import.meta.env.BASE_URL}/blog`} class="text-white/80 hover:text-white transition-colors text-sm font-medium">
				Blog
			</a>

			<!-- Dark mode toggle -->
			<button
				id="theme-toggle"
				class="p-2 rounded-xl glass hover:bg-white/20 transition-all duration-300"
				aria-label="Toggle dark mode"
			>
				<!-- Sun icon (shown in dark mode) -->
				<svg
					class="w-5 h-5 text-white hidden dark:block"
					fill="none"
					stroke="currentColor"
					viewBox="0 0 24 24"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						stroke-width="2"
						d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
					></path>
				</svg>
				<!-- Moon icon (shown in light mode) -->
				<svg
					class="w-5 h-5 text-white block dark:hidden"
					fill="none"
					stroke="currentColor"
					viewBox="0 0 24 24"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						stroke-width="2"
						d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
					></path>
				</svg>
			</button>
		</div>
	</nav>
</header>

<script>
	const themeToggle = document.getElementById('theme-toggle');

	// Check for saved theme preference or default to system preference
	const getThemePreference = () => {
		if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
			return localStorage.getItem('theme');
		}
		return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
	};

	const setTheme = (theme: string) => {
		if (theme === 'dark') {
			document.documentElement.classList.add('dark');
		} else {
			document.documentElement.classList.remove('dark');
		}
		localStorage.setItem('theme', theme);
	};

	// Set initial theme
	setTheme(getThemePreference()!);

	// Toggle theme on button click
	themeToggle?.addEventListener('click', () => {
		const currentTheme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
		setTheme(currentTheme === 'dark' ? 'light' : 'dark');
	});
</script>
